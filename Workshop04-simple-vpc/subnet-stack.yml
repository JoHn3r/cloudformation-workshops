AWSTemplateFormatVersion: 2010-09-09
Description: Subnet Stack for Simple VPC
Parameters:
  Env:
    Type: String
  VpcId:
    Type: AWS::EC2::VPC::Id
  PublicSubnetCidr:
    AllowedPattern: ^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(1[6-9]|2[0-8]))$
    Type: String
  PrivateSubnetCidr:
    AllowedPattern: ^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])(\/(1[6-9]|2[0-8]))$
    Type: String
  AZ:
    Type: AWS::EC2::AvailabilityZone::Name
Resources:
  PublicSubnet:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref 'VpcId'
      CidrBlock: !Ref PublicSubnetCidr
      AvailabilityZone: !Ref 'AZ'
      Tags:
        - Key: Name
          Value: !Sub '${Env}-${AZ}-public'
  PrivateSubnet:
    Type: AWS::EC2::Subnet
    Properties:
      VpcId: !Ref 'VpcId'
      CidrBlock: !Ref PrivateSubnetCidr
      AvailabilityZone: !Ref 'AZ'
      Tags:
        - Key: Name
          Value: !Sub '${Env}-${AZ}-private'
